<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.min.js"></script>
  </head>
  <body>
    <script>
      var config = {
        type: Phaser.AUTO,
        width: 800,
        height: 600,
        physics: {
          default: "arcade",
          arcade: {
            gravity: { y: 0 },
          },
        },
        scene: {
          preload: preload,
          create: create,
          update: updateGame,
        },
      };

      var game = new Phaser.Game(config);

      function preload() {
        this.load.image("background", "assets/Background.png");
        this.load.image("player", "assets/Padel.png");
        this.load.image("bot", "assets/Padel.png");
      }

      var velocityX = 200;
      var velocityY = 100;

      function create() {
        cursor = this.input.keyboard.createCursorKeys();
        console.log(cursor);

        this.add.image(400, 300, "background");
        player = this.physics.add.sprite(20, 300, "player");
        bot = this.physics.add.sprite(780, 300, "bot");

        var ball = this.add.rectangle(200, 200, 30, 30, 0xffffff);

        player.body.setCollideWorldBounds(true);
        player.body.immovable = true;

        this.physics.world.enable(ball);

        ball.body.setVelocity(velocityY, velocityX);
        ball.body.setBounce(1, 1);
        ball.body.setCollideWorldBounds(true);

        this.physics.add.collider(ball, player, hitPlayer, null, this);
      }

      function hitPlayer(ball, player) {
        velocityX = velocityX + 50;
        velocityX = velocityX * -1;
        console.log(velocityX);

        ball.body.setVelocityX(velocityX);

        if (velocityY < 0) {
          velocityY = velocityY * -1;
          ball.body.setVelocityY(velocityY);
        }
      }

      function updateGame() {
        if (cursor.up.isDown) {
          player.setVelocityY(-150);
        } else if (cursor.down.isDown) {
          player.setVelocityY(150);
        } else {
          player.setVelocityY(0);
        }
      }
    </script>
  </body>
</html>
